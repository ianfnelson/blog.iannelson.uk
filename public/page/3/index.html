<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.146.6"><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Ian Nelson</title>

<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="https://bloghugo.iannelson.uk/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.507965cef202c8ad6ac74222b0ed770dc0aaeab2c82c87ebdbd46b4f8b3196e2.css" integrity="sha256-UHllzvICyK1qx0IisO13DcCq6rLILIfr29RrT4sxluI=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://bloghugo.iannelson.uk/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://bloghugo.iannelson.uk/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://bloghugo.iannelson.uk/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://bloghugo.iannelson.uk/apple-touch-icon.png">
<link rel="mask-icon" href="https://bloghugo.iannelson.uk/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://bloghugo.iannelson.uk/index.xml">
<link rel="alternate" hreflang="en" href="https://bloghugo.iannelson.uk/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://bloghugo.iannelson.uk/">
  <meta property="og:site_name" content="Ian Nelson">
  <meta property="og:title" content="Ian Nelson">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ian Nelson">
<meta name="twitter:description" content="">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Ian Nelson",
  "url": "https://bloghugo.iannelson.uk/",
  "description": "",
  "logo": "https://bloghugo.iannelson.uk/favicon.ico",
  "sameAs": [
      
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://bloghugo.iannelson.uk/" accesskey="h" title="Ian Nelson (Alt + H)">Ian Nelson</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://bloghugo.iannelson.uk/testimonials" title="Testimonials">
                    <span>Testimonials</span>
                </a>
            </li>
            <li>
                <a href="https://bloghugo.iannelson.uk/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://bloghugo.iannelson.uk/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://bloghugo.iannelson.uk/search/" title="Search">
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="mailto:ian@iannelson.uk" title="Email">
                    <span>Email</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
<figure class="entry-cover">
        <img loading="lazy" src="https://cdn.iannelson.uk/uploads/2011/04/JamesBirrell_2-1.png" alt="">
</figure>
  <header class="entry-header">
    <h2 class="entry-hint-parent">It&#39;s A Small World
    </h2>
  </header>
  <div class="entry-content">
    <p>It’s been a long time since I posted a blog entry tagged with “genealogy” (over three years, in fact). I find it to be a hobby that I pursue in fits and starts – periods of all-encompassing obsession followed by long periods of total inactivity. But the old Family Tree has been fleshed out nicely since I last updated you, dear reader. It has also acquired a most surprising and welcome addition.
...</p>
  </div>
  <footer class="entry-footer"><span title='2011-04-09 19:04:00 +0000 +0000'>April 9, 2011</span></footer>
  <a class="entry-link" aria-label="post link to It&#39;s A Small World" href="https://bloghugo.iannelson.uk/its-a-small-world/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Entity Framework Week Part 5: Concluding Thoughts
    </h2>
  </header>
  <div class="entry-content">
    <p>This is the fifth in a series of five posts recounting my experiences using Entity Framework Code-First to replace ADO.NET and stored procedures in a client’s existing application. The introductory post in the series is here.
I am lucky to have had the opportunity to spend a time-boxed period playing with Entity Framework Code-First in a real-world scenario, and to get paid for the privilege! I now have a clearer understanding of how it has progressed during the last few years, what its strong points are, and where it still has shortcomings compared to the much more mature NHibernate framework.
...</p>
  </div>
  <footer class="entry-footer"><span title='2011-03-11 09:03:00 +0000 GMT'>March 11, 2011</span></footer>
  <a class="entry-link" aria-label="post link to Entity Framework Week Part 5: Concluding Thoughts" href="https://bloghugo.iannelson.uk/entity-framework-week-part-5-concluding-thoughts/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Entity Framework Week Part 4: Features and Further Investigations
    </h2>
  </header>
  <div class="entry-content">
    <p>This is the fourth in a series of five posts recounting my experiences using Entity Framework Code-First to replace ADO.NET and stored procedures in a client’s existing application. The introductory post in the series is here.
I didn’t want this series of posts to descend into a point-scoring NHibernate-versus-Entity Framework comparison, but…
I now have a basic proof-of-concept up and running, with my client’s nascent application now being powered by Entity Framework Code-First CTP5 rather than a hand-rolled DAL. So, I had some time to consider future functional and non-functional requirements that the team would be asked to develop and support, and investigate how EF would meet the challenge.
...</p>
  </div>
  <footer class="entry-footer"><span title='2011-03-10 09:03:00 +0000 GMT'>March 10, 2011</span></footer>
  <a class="entry-link" aria-label="post link to Entity Framework Week Part 4: Features and Further Investigations" href="https://bloghugo.iannelson.uk/entity-framework-week-part-4-features-and-further-investigations/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Entity Framework Week Part 3: Runtime Issues Encountered
    </h2>
  </header>
  <div class="entry-content">
    <p>This is the third in a series of five posts recounting my experiences using Entity Framework Code-First to replace ADO.NET and stored procedures in a client’s existing application. The introductory post in the series is here.
Having configured and initialized Entity Framework, and tweaked the mappings, by Day 3 I was all set to start consuming my shiny new DbContext implementation from the application code, and actually get some CRUD work done. Not unexpectedly, I hit a few issues along the way…
...</p>
  </div>
  <footer class="entry-footer"><span title='2011-03-09 09:03:00 +0000 GMT'>March 9, 2011</span></footer>
  <a class="entry-link" aria-label="post link to Entity Framework Week Part 3: Runtime Issues Encountered" href="https://bloghugo.iannelson.uk/entity-framework-week-part-3-runtime-issues-encountered/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Entity Framework Week Part 2: Conventions and Fluent Mappings
    </h2>
  </header>
  <div class="entry-content">
    <p>This is the second in a series of five posts recounting my experiences using Entity Framework Code-First to replace ADO.NET and stored procedures in a client’s existing application. The introductory post in the series is here.
As mentioned in yesterday’s post, I was attempting to use Entity Framework Code-First CTP5 to map an existing domain model to an existing database schema. Fortunately the project was in its infancy and there was a high degree of cohesion between the two models. I therefore didn’t anticipate too many difficulties ahead – the occasional naming discrepancy to resolve, and table-per-hierarchy mappings that would need their discriminators specifying – nothing too complicated really. I hoped to make as few changes as possible to either the database schema or domain model.
...</p>
  </div>
  <footer class="entry-footer"><span title='2011-03-08 09:03:00 +0000 GMT'>March 8, 2011</span></footer>
  <a class="entry-link" aria-label="post link to Entity Framework Week Part 2: Conventions and Fluent Mappings" href="https://bloghugo.iannelson.uk/entity-framework-week-part-2-conventions-and-fluent-mappings/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Entity Framework Week Part 1: Introduction, Configuration and Initialization
    </h2>
  </header>
  <div class="entry-content">
    <p>In February 2011 I found myself doing some contract development work in a team that was still doing data access using raw ADO.NET and stored procedures. Being the NHibernate fanboy that I am, I naturally attempted to persuade them of the benefits of moving over to NH, even going so far as to develop (in my own time) an NH-powered version of their application.
My efforts were partially successful. The team were sold on the idea of using an ORM, but wanted me to develop a second proof of concept using Microsoft ADO.NET Entity Framework rather than NHibernate. This prompted much mirth amongst my FaceBook friends.
...</p>
  </div>
  <footer class="entry-footer"><span title='2011-03-07 09:03:00 +0000 GMT'>March 7, 2011</span></footer>
  <a class="entry-link" aria-label="post link to Entity Framework Week Part 1: Introduction, Configuration and Initialization" href="https://bloghugo.iannelson.uk/entity-framework-week-part-1-introduction-configuration-and-initialization/"></a>
</article>

<article class="post-entry"> 
<figure class="entry-cover">
        <img loading="lazy" src="https://cdn.iannelson.uk/uploads/2010/12/iStock_000004248715XSmall_3-1.jpg" alt="">
</figure>
  <header class="entry-header">
    <h2 class="entry-hint-parent">Enterprise Integration Anti-Patterns #2 – Shared Assemblies
    </h2>
  </header>
  <div class="entry-content">
    <p>Having slain the beast that is Shared Database, the next dragon to appear on my Enterprise Integration horizon is Shared Assemblies. That is, the suggestion that Application A can leverage the functionality of Application B by simply adding references to B’s DLLs. After all, this potential for reuse is why we put our code in reusable assemblies in the first place, isn’t it..?!
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-12-01 10:12:00 +0000 GMT'>December 1, 2010</span></footer>
  <a class="entry-link" aria-label="post link to Enterprise Integration Anti-Patterns #2 – Shared Assemblies" href="https://bloghugo.iannelson.uk/enterprise-integration-anti-patterns-2-shared-assemblies/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">NHibernate and Mapping Aggregates
    </h2>
  </header>
  <div class="entry-content">
    <p>A few days ago a friend emailed me the following question regarding NHibernate mappings for a solution he’s currently developing:
“I have an idea entity that has a collection of comment entities and I need to get the comment count for each idea. I made a massive mistake at the beginning by calling idea.Comments.Count (even worse, I did it in the view!), which due to the collection being lazy-loaded caused about 10 database calls so performance was sluggish even with second level cache. I was therefore wondering how you would do it – would you use HQL and use Comments.size or would you do something differently?”
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-11-25 08:11:00 +0000 GMT'>November 25, 2010</span></footer>
  <a class="entry-link" aria-label="post link to NHibernate and Mapping Aggregates" href="https://bloghugo.iannelson.uk/nhibernate-and-mapping-aggregates/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Enterprise Integration Anti-Patterns #1 – The Shared Database
    </h2>
  </header>
  <div class="entry-content">
    <p>So, I was in the office at a client site, walking back to my desk after grabbing a quick coffee, when a developer on a sister product to my current project grabbed me and asked (I paraphrase somewhat):
“Hey, Ian – [my app] needs to retrieve [small piece of data] from [your app], so I’ve stuck a stored proc in [your database], OK?”
I felt quite violated. My poor app, what had it done to deserve this despicable treatment?
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-11-08 05:11:00 +0000 GMT'>November 8, 2010</span></footer>
  <a class="entry-link" aria-label="post link to Enterprise Integration Anti-Patterns #1 – The Shared Database" href="https://bloghugo.iannelson.uk/enterprise-integration-anti-patterns-1-the-shared-database/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">MVC – Where To Put Business Logic?
    </h2>
  </header>
  <div class="entry-content">
    <p>I just had an email from a friend asking where business logic should go when using MVC – the controller or the model.
I thought I’d share my reply:
I think asking whether the business logic should go in the Model or the Controller is a false dichotomy. There are different kinds of business logic, and there’s also the possibility of putting it somewhere else entirely.
Much business logic does indeed belong in the model, particularly stuff like encapsulating calculations and projections, adding meaning to raw data properties, and ensuring domain objects are maintained in a valid state. I see this as the traditional side of OO design – encapsulating logic and restricting accessibility.
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-11-03 12:11:00 +0000 GMT'>November 3, 2010</span></footer>
  <a class="entry-link" aria-label="post link to MVC – Where To Put Business Logic?" href="https://bloghugo.iannelson.uk/mvc-where-to-put-business-logic/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Testing IoC Registrations
    </h2>
  </header>
  <div class="entry-content">
    <p>When I first started writing automated unit tests for my code, I remember getting carried away writing lots of tiny little tests, each with a single Assert. It felt good initially to see all those green ticks, but rapidly became a maintenance headache, and I am now happier having fewer less-brittle tests that do more.
I think it’s great when tools like AutoMapper provide powerful methods like…
…allowing me to test large swathes of the system configuration with a single, stable test.
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-04-09 14:04:00 +0000 +0000'>April 9, 2010</span></footer>
  <a class="entry-link" aria-label="post link to Testing IoC Registrations" href="https://bloghugo.iannelson.uk/testing-ioc-registrations/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Testing LINQ Queries
    </h2>
  </header>
  <div class="entry-content">
    <p>I’ve been asked “How do you test LINQ queries?” a couple of times in the past few months, so I thought I’d blog my answer for the benefit of all you lovely people.
Firstly I should explain how I’ve been doing most of my data access in recent months. I find that the Repository pattern, and particularly the .NET implementation described here by Fabio Maulo meets the vast majority of requirements I have in my applications, and I fall back on additionally using custom DAOs when required.
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-04-09 13:04:00 +0000 +0000'>April 9, 2010</span></footer>
  <a class="entry-link" aria-label="post link to Testing LINQ Queries" href="https://bloghugo.iannelson.uk/testing-linq-queries/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">WCF – Global Exception Handling
    </h2>
  </header>
  <div class="entry-content">
    <p>I’ve done a fair bit of WCF development recently (and amazingly I came out of it relatively unscathed, both psychologically and emotionally). Using Castle Windsor’s WCF Facility helped a great deal, but I still found myself writing a fair bit of infrastructure and plumbing code. I thought I’d blog some of these code snippets lest I forget, and on the offchance they might help others.
One of the things I wanted to achieve was to ensure that any unhandled exceptions that propagated to the top of the stack were logged. The following custom EndpointBehavior achieves that. I’m using Castle Logging Facility here, but you could of course swap out the logging code for whatever error handling code you require.
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-04-09 13:04:00 +0000 +0000'>April 9, 2010</span></footer>
  <a class="entry-link" aria-label="post link to WCF – Global Exception Handling" href="https://bloghugo.iannelson.uk/wcf-global-exception-handling/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">WCF – Logging Before and After Operation Invocation
    </h2>
  </header>
  <div class="entry-content">
    <p>Here’s another custom WCF EndpointBehavior I found useful recently.
Not content with logging all unhandled errors, I wanted to output a DEBUG level log message before and after every operation invocation. As before, I’m using the Castle Windsor Logging Facility to handle my logging, but you can swap that out for your logger of choice if required.
Firstly, here’s the EndPointBehaviour itself. This adds a custom CallContextInitializer to every service operation:
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-04-09 13:04:00 +0000 +0000'>April 9, 2010</span></footer>
  <a class="entry-link" aria-label="post link to WCF – Logging Before and After Operation Invocation" href="https://bloghugo.iannelson.uk/wcf-logging-before-and-after-operation-invocation/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">WCF – NHibernate Unit Of Work Endpoint Behavior
    </h2>
  </header>
  <div class="entry-content">
    <p>OK, my last WCF-related code snippet of the day, I promise. This is quite similar to the last one. I required that the WCF service I was developing started a new NHibernate Session for each invocation, and closed it after invocation (i.e. session-per-request). I couldn’t rely on the ASP.NET session start and end events in global.asax as this particular WCF service was to respond to MSMQ messages rather than HTTP.
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-04-09 13:04:00 +0000 +0000'>April 9, 2010</span></footer>
  <a class="entry-link" aria-label="post link to WCF – NHibernate Unit Of Work Endpoint Behavior" href="https://bloghugo.iannelson.uk/wcf-nhibernate-unit-of-work-endpoint-behavior/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://bloghugo.iannelson.uk/page/2/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="https://bloghugo.iannelson.uk/page/4/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://bloghugo.iannelson.uk/">Ian Nelson</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
