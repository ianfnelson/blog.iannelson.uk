<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | Ian Nelson</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - Ian Nelson">
<meta name="author" content="">
<link rel="canonical" href="https://blog.iannelson.uk/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.507965cef202c8ad6ac74222b0ed770dc0aaeab2c82c87ebdbd46b4f8b3196e2.css" integrity="sha256-UHllzvICyK1qx0IisO13DcCq6rLILIfr29RrT4sxluI=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://blog.iannelson.uk/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.iannelson.uk/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.iannelson.uk/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blog.iannelson.uk/apple-touch-icon.png">
<link rel="mask-icon" href="https://blog.iannelson.uk/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://blog.iannelson.uk/posts/index.xml">
<link rel="alternate" hreflang="en" href="https://blog.iannelson.uk/posts/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-5JMKSPFQKQ"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-5JMKSPFQKQ');
        }
      </script><meta property="og:url" content="https://blog.iannelson.uk/posts/">
  <meta property="og:site_name" content="Ian Nelson">
  <meta property="og:title" content="Posts">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Posts">
<meta name="twitter:description" content="">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://blog.iannelson.uk/posts/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.iannelson.uk/" accesskey="h" title="Ian Nelson (Alt + H)">Ian Nelson</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.iannelson.uk/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://blog.iannelson.uk/categories" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://blog.iannelson.uk/testimonials" title="Testimonials">
                    <span>Testimonials</span>
                </a>
            </li>
            <li>
                <a href="https://familytree.iannelson.uk" title="Family Tree">
                    <span>Family Tree</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Posts
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">WCF ‚Äì NHibernate Unit Of Work Endpoint Behavior
    </h2>
  </header>
  <div class="entry-content">
    <p>OK, my last WCF-related code snippet of the day, I promise. This is quite similar to the last one. I required that the WCF service I was developing started a new NHibernate Session for each invocation, and closed it after invocation (i.e. session-per-request). I couldn‚Äôt rely on the ASP.NET session start and end events in global.asax as this particular WCF service was to respond to MSMQ messages rather than HTTP.
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-04-09 13:04:00 +0000 +0000'>9 April 2010</span></footer>
  <a class="entry-link" aria-label="post link to WCF ‚Äì NHibernate Unit Of Work Endpoint Behavior" href="https://blog.iannelson.uk/wcf-nhibernate-unit-of-work-endpoint-behavior/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">An MVC Gotcha and the PRG Pattern
    </h2>
  </header>
  <div class="entry-content">
    <p>If you‚Äôve recently moved across to ASP.NET MVC development following years of wrangling with the leaky abstraction that was WebForms, you may have encountered some seemingly curious behaviour when posting back to the same URL.
Suppose we have the following simple, contrived and utterly imagination-free model:
Here‚Äôs a view:
And here‚Äôs the controller:
Note that we have two separate Index actions ‚Äì one for HTTP GET which instantiates and displays a new FooModel instance, and one for HTTP POST which modifies one of the properties on the posted FooModel instance before re-rendering the view.
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-04-09 10:04:00 +0000 +0000'>9 April 2010</span></footer>
  <a class="entry-link" aria-label="post link to An MVC Gotcha and the PRG Pattern" href="https://blog.iannelson.uk/an-mvc-gotcha-and-the-prg-pattern/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">On The Market Again
    </h2>
  </header>
  <div class="entry-content">
    <p>This blog post comes to you live from a Starbucks in the north of England.
Yesterday I wrapped up another eight months‚Äô stint contracting at my old haunt Marshalls Plc. It‚Äôs been a genuinely interesting gig, working on two distinct greenfield projects using bang up to date technologies including .NET 4.0 and MVC2.
But it hasn‚Äôt just been a benefit for my CV, I think Marshalls might have got a little something out of the arrangement too, as Marshalls‚Äô Development Manager Sion Harrison commented yesterday:
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-04-01 08:04:00 +0000 +0000'>1 April 2010</span></footer>
  <a class="entry-link" aria-label="post link to On The Market Again" href="https://blog.iannelson.uk/on-the-market-again/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">MoreLINQ ‚Äì IEnumerable Extension From Jon Skeet
    </h2>
  </header>
  <div class="entry-content">
    <p>I‚Äôve just become aware of this MoreLINQ project containing some neat IEnumerable extensions authored by the inimitable Jon Skeet.
I particularly like the look of DistinctBy ‚Äì that‚Äôs gotta be a lot easier than passing custom instances of IEqualityComparer into Distinct().
Fun fact ‚Äì I used to work with someone who went to school with Jon Skeet! True Story!
</p>
  </div>
  <footer class="entry-footer"><span title='2010-03-30 10:03:00 +0000 +0000'>30 March 2010</span></footer>
  <a class="entry-link" aria-label="post link to MoreLINQ ‚Äì IEnumerable Extension From Jon Skeet" href="https://blog.iannelson.uk/morelinq-ienumerable-extension-from-jon-skeet/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">On the Inherent Negativity of Computer Programmers
    </h2>
  </header>
  <div class="entry-content">
    <p>A couple of weeks ago, early one morning, my friend and fellow coder Scott asked a curious question:
‚ÄúDo you think that programming computers for a living gives you a negative outlook on life?‚Äù
Now, Scott is unfortunately responsible for administering occasional TLC to a codebase that I cut as long ago as 2004, so I assumed he was referring to this and was about to raise some complaints about my hand-rolled query object criteria framework or other coding horror. I steeled myself to defend my work as he continued to explain:
...</p>
  </div>
  <footer class="entry-footer"><span title='2010-02-01 20:02:00 +0000 GMT'>1 February 2010</span></footer>
  <a class="entry-link" aria-label="post link to On the Inherent Negativity of Computer Programmers" href="https://blog.iannelson.uk/on-the-inherent-negativity-of-computer-programmers/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Deduplication Fail
    </h2>
  </header>
  <div class="entry-content">
    <p>Oh, the irony!
</p>
  </div>
  <footer class="entry-footer"><span title='2009-12-02 12:12:00 +0000 GMT'>2 December 2009</span></footer>
  <a class="entry-link" aria-label="post link to Deduplication Fail" href="https://blog.iannelson.uk/deduplication-fail/"></a>
</article>

<article class="post-entry"> 
<figure class="entry-cover">
        <img loading="lazy" src="https://blogstouks01.z33.web.core.windows.net/2009/10/iStock_000010551634XSmall_3-1.jpg" alt="">
</figure>
  <header class="entry-header">
    <h2 class="entry-hint-parent">A Circuit Breaker Which Trips On Frequency Of Failures
    </h2>
  </header>
  <div class="entry-content">
    <p>@Jez tweeted last night:
@ianfnelson admit it: you use Castle Windsor primarily to highlight and lampoon Google‚Äôs poor selection of adwords?!
‚Äî ùöÇùöëùöòùöòùöùùöíùöóùöê ùöÇùöåùöíùöïùöïùö¢ (@shootingscilly) October 26, 2009
Funny, but not true. I am enamoured with the Castle Windsor project because its power makes it fairly simple for me to develop loosely-coupled systems which are easily maintained and tested. The wide range of Facilities and Contrib projects also integrate nicely with the other parts of my current development stack (NHibernate, WCF, WF, log4net).
...</p>
  </div>
  <footer class="entry-footer"><span title='2009-10-28 11:10:00 +0000 GMT'>28 October 2009</span></footer>
  <a class="entry-link" aria-label="post link to A Circuit Breaker Which Trips On Frequency Of Failures" href="https://blog.iannelson.uk/a-circuit-breaker-which-trips-on-frequency-of-failures/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Castle Windsor Array Resolution Gotcha
    </h2>
  </header>
  <div class="entry-content">
    <p>The shiny new system which I‚Äôve recently been developing makes heavy use of the Chain of Responsibility pattern, and as such a number of service classes take an array of objects in the constructor:
I‚Äôm using Castle Windsor for dependency management, so I‚Äôve been fluently registering all instances of ILeadAllocator:
Easy, right? And yet at runtime Windsor surprised me by throwing this exception in my face:
Castle.MicroKernel.Handlers.HandlerException: Can‚Äôt create component &amp;#8216;Marshalls.Leads.ApplicationService.LeadAllocationService‚Äô as it has dependencies to be satisfied. Marshalls.Leads.ApplicationService.LeadAllocationService is waiting for the following dependencies: Keys (components with specific keys) ‚Äì leadAllocators which was not registered. Huh?! What gives? Well, a little Googling revealed this post from Castle founder Hamilton Verissimo explaining that by default the Castle MicroKernel expects me to define what should be included in the array. But he goes on to explain that the behaviour I desire can be achieved by registering a custom subresolver with the microkernel. That subresolver has since been included in the Castle Windsor distro, so in actual fact all I needed to do was add the following line of code when configuring my container:
...</p>
  </div>
  <footer class="entry-footer"><span title='2009-10-26 10:10:00 +0000 GMT'>26 October 2009</span></footer>
  <a class="entry-link" aria-label="post link to Castle Windsor Array Resolution Gotcha" href="https://blog.iannelson.uk/castle-windsor-array-resolution-gotcha/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">On Primality In Packsizes
    </h2>
  </header>
  <div class="entry-content">
    <p>Benny George, our precocious two-year-old, is quite the fan of Mister Maker, and enjoys spending time doing arty crafty stuff with his mum. Now, the great thing about the BBC is that they tend to suggest projects which can be created using bits and bobs that you‚Äôre likely to have around the home ‚Äì old cereal boxes and the like. But occasionally some specialist resources have to be procured in the name of Ben‚Äôs art, and so it was that Joce today spent ¬£1.99 on a pack of the ‚Äúgoogly eyes‚Äù so beloved of Maker.
...</p>
  </div>
  <footer class="entry-footer"><span title='2009-10-23 10:10:00 +0000 +0000'>23 October 2009</span></footer>
  <a class="entry-link" aria-label="post link to On Primality In Packsizes" href="https://blog.iannelson.uk/on-primality-in-packsizes/"></a>
</article>

<article class="post-entry"> 
<figure class="entry-cover">
        <img loading="lazy" src="https://blogstouks01.z33.web.core.windows.net/2009/10/iStock_000000942732XSmall_2-1.jpg" alt="">
</figure>
  <header class="entry-header">
    <h2 class="entry-hint-parent">Castle Windsor Lifestyle Gotcha
    </h2>
  </header>
  <div class="entry-content">
    <p>I always knew my lifestyle choices would come back to bite me some day‚Ä¶
I‚Äôve been making heavy use of the Castle Windsor container to handle dependency and configuration management in the shiny new system that I‚Äôm currently developing. For the most part it‚Äôs been an absolute blast, allowing me to easily create a loosely-coupled system architecture and focus my efforts on what the system should be achieving for the client, rather than worrying about how it all hangs together.
...</p>
  </div>
  <footer class="entry-footer"><span title='2009-10-19 05:10:00 +0000 +0000'>19 October 2009</span></footer>
  <a class="entry-link" aria-label="post link to Castle Windsor Lifestyle Gotcha" href="https://blog.iannelson.uk/castle-windsor-lifestyle-gotcha/"></a>
</article>

<article class="post-entry"> 
<figure class="entry-cover">
        <img loading="lazy" src="https://blogstouks01.z33.web.core.windows.net/2009/06/amc1_2-1.png" alt="">
</figure>
  <header class="entry-header">
    <h2 class="entry-hint-parent">SQL 2008 ‚Äì Missing Indexes Hints
    </h2>
  </header>
  <div class="entry-content">
    <p>Improvements to the Execution Plan UI in SQL Server Management Studio 2008 sure do make it a doddle to improve query execution time.
A client just reported that a particular stored procedure kept timing out.
Viewing the Estimated Execution Plan for this query displayed a nice green message advising of a potentially missing index which could improve performance by &gt;95%:
Right-clicking and selecting ‚ÄúMissing Index Details‚Äù then brings up a new query window containing the index creation DDL (I had changed the index name by the time I grabbed this capture):
...</p>
  </div>
  <footer class="entry-footer"><span title='2009-06-11 12:06:00 +0000 +0000'>11 June 2009</span></footer>
  <a class="entry-link" aria-label="post link to SQL 2008 ‚Äì Missing Indexes Hints" href="https://blog.iannelson.uk/sql-2008-missing-indexes-hints/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Agile Yorkshire @ The Pub ‚Äì Gojko Adzic, 10th June 2009
    </h2>
  </header>
  <div class="entry-content">
    <p>If you‚Äôre in the Leeds area next Wednesday, why not come along to this Agile Yorkshire session?
10th June ‚Äì Gojko Adzic: Slim, The Future Of FitNesse Details This talk will introduce Slim, the most important upgrade to FitNesse in years. Slim is the new test runner which promises to bring platform interoperability, easier integration, a much simpler programming model and lots of small helpers that will allow us to write and maintain executable specifications and acceptance tests easier. This is a session for .NET and Java developers. Some prior exposure to FitNesse and FIT would be beneficial, but not required.
...</p>
  </div>
  <footer class="entry-footer"><span title='2009-06-05 08:06:00 +0000 +0000'>5 June 2009</span></footer>
  <a class="entry-link" aria-label="post link to Agile Yorkshire @ The Pub ‚Äì Gojko Adzic, 10th June 2009" href="https://blog.iannelson.uk/agile-yorkshire-the-pub-gojko-adzic-10th-june-2009/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Ian Nelson, MCPD
    </h2>
  </header>
  <div class="entry-content">
    <p>Well, for the record, I passed MS exam 70-553 yesterday on my second attempt, which makes me a Microsoft Certified Professional Developer ‚Äì Enterprise Application Developer:
And I also acquired a few new MCTS certifications as a happy by-product:
My full transcript, including ‚Äúlegacy‚Äù certifications, is here.
Phew! I think that the time has now come for me to take a bit of a break from the certification circus. They are a nice-to-have, but the opportunity cost is too high ‚Äì there are many other ways in which I can spend what little spare time I have to better develop my skills.
...</p>
  </div>
  <footer class="entry-footer"><span title='2009-05-27 11:05:00 +0000 +0000'>27 May 2009</span></footer>
  <a class="entry-link" aria-label="post link to Ian Nelson, MCPD" href="https://blog.iannelson.uk/ian-nelson-mcpd/"></a>
</article>

<article class="post-entry"> 
<figure class="entry-cover">
        <img loading="lazy" src="https://blogstouks01.z33.web.core.windows.net/2009/05/3542421968_6e26feee92_b-1.jpg" alt="">
</figure>
  <header class="entry-header">
    <h2 class="entry-hint-parent">New Office Photos
    </h2>
  </header>
  <div class="entry-content">
    <p>I promised you some photos of my new office a while back, didn‚Äôt I? OK, here you go‚Ä¶
</p>
  </div>
  <footer class="entry-footer"><span title='2009-05-22 07:05:00 +0000 +0000'>22 May 2009</span></footer>
  <a class="entry-link" aria-label="post link to New Office Photos" href="https://blog.iannelson.uk/new-office-photos/"></a>
</article>

<article class="post-entry"> 
<figure class="entry-cover">
        <img loading="lazy" src="https://blogstouks01.z33.web.core.windows.net/2009/05/nh1_2-1.png" alt="">
</figure>
  <header class="entry-header">
    <h2 class="entry-hint-parent">NHProf ‚Äì NHibernate Profiler
    </h2>
  </header>
  <div class="entry-content">
    <p>The inimitable Ayende Rahien is close to releasing version 1.0 of his NHibernate Profiler tool, and it really is shaping up to be a rather lovely little addition to my developer toolbox.
In much the same way that we can use SQL Server Profiler to monitor database activity, and ANTS Profiler to monitor the performance and memory usage of .NET applications, NHProf profiles the activity of the data access layer (NHibernate), and even goes as far as providing helpful hints for potential improvements.
...</p>
  </div>
  <footer class="entry-footer"><span title='2009-05-19 17:05:00 +0000 +0000'>19 May 2009</span></footer>
  <a class="entry-link" aria-label="post link to NHProf ‚Äì NHibernate Profiler" href="https://blog.iannelson.uk/nhprof-nhibernate-profiler/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://blog.iannelson.uk/posts/page/3/">
      ¬´&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="https://blog.iannelson.uk/posts/page/5/">Next&nbsp;&nbsp;¬ª
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://blog.iannelson.uk/">Ian Nelson</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
